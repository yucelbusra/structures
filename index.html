<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Structural Engineer Roleplay</title>
  <style>
    .step{padding:8px 12px;border-radius:8px;background:#ccc;font-weight:bold;color:#fff}
    .step.active{background:#0077cc}
    .step.completed{background:#2ecc71}
    body{margin:0;font-family:sans-serif;background-color:#cce7f6}
    .screen{display:none;min-height:100vh;width:100vw;justify-content:center;align-items:center;flex-direction:column;text-align:center;padding:20px;box-sizing:border-box}
    .active{display:flex}
    canvas{border:1px solid #888;margin-top:20px}

    /* Badge bar */
    #badgeBar{min-height:48px;display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .badge-wrapper{position:relative;width:48px;height:48px}
    .badge{width:100%;height:100%;border-radius:8px;object-fit:contain;border:1px solid #e0e0e0;background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.06)}
    .badge.locked{filter:grayscale(100%) opacity(.5)}
    .lock-icon{position:absolute;top:50%;left:50%;width:22px;height:22px;transform:translate(-50%,-50%);opacity:.7;pointer-events:none}

    button{margin-top:10px;padding:10px 20px;font-size:16px;border:none;border-radius:8px;background-color:#0077cc;color:#fff;cursor:pointer}
    button:hover{background-color:#005fa3}
    button:disabled{background-color:#ccc;cursor:not-allowed}
    .hint-button{margin-left:10px;padding:2px 8px;font-size:14px}
    input,select{padding:6px;margin-top:5px;margin-bottom:10px;width:180px}

    #feedback{margin-top:20px;padding:10px;background-color:#e0f7e9;border-left:4px solid #2ecc71;display:none}
    #hintModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.6);justify-content:center;align-items:center;z-index:1000}
    #hintModal img{max-width:90vw;max-height:80vh}

    /* Animation */
    @keyframes fadeInOut {
        0% { opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { opacity: 0; display: none; }
    }
    
    /* Input Group Styling */
    .input-group {
        background: white;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        margin: 10px;
        display: inline-block;
        vertical-align: top;
        width: 200px;
    }
  </style>
</head>
<body>

  <div id="progressBar" style="display:flex;gap:20px;margin:20px 0 40px 0; justify-content:center;">
    <div class="step" id="step1">üîπ Intro</div>
    <div class="step" id="step2">üìè Slab</div>
    <div class="step" id="step3">üìä Loads</div>
    <div class="step" id="step4">‚öñÔ∏è Design</div>
    <div class="step" id="step5">üéì Summary</div>
  </div>

  <div id="badgeBar" aria-label="Badges" style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin:-30px 20px 20px 20px; justify-content:center;"></div>

<div id="introScreen" class="screen active">
  <h1>üßë‚Äçüîß Welcome, Construction Managers!</h1>
  <img src="./img/welcome.gif" alt="Welcome" style="max-width: 300px;">
  <p>Your task is to design timber beams for a sustainable building project.</p>
  <button id="continueBtn">I'm Ready! ‚Üí</button>
</div>

<div id="canvasScreen" class="screen">
    <div style="display:flex;gap:40px;align-items:flex-start;">
      <div>
        <h2>Slab Design Parameters</h2>
        <label>Width of Slab (W) (ft):</label><br>
        <input type="number" id="inputWidth" step="0.1"><br>
        <label>Length of Slab (L) (ft):</label><br>
        <input type="number" id="inputLength" step="0.1"><br>
        <label>Number of Beams:</label><br>
        <input type="number" id="inputBeamCount" step="1" min="2"><br>
        <p id="spacingInfo" style="margin-top:10px;font-weight:bold;"></p>
        <button id="drawCanvasBtn">Visualize Design</button>
        <button id="backBtn">‚Üê Back</button>
      </div>
      <img src="./img/SlabDimensions.png" alt="Slab illustration" style="max-width:300px;">
    </div>
    <div style="margin-top:20px;">
      <canvas id="slabCanvas" width="400" height="400"></canvas>
    </div>
    <button id="continueToLoadBtn" style="margin-top:20px;">Continue ‚Üí</button>
</div>

<div id="loadScreen" class="screen">
    <div style="display:flex;gap:20px;align-items:flex-start;">
      <div>
        <h2>Load Parameters (psi)</h2>
        <label>Permanent (Dead) Load:</label><br>
        <input type="number" id="permanentLoad" step="0.1"><br>
        <img id="imgPermanent" src="./img/load-permanent.png" style="height:30px;display:none;"><br>

        <label>Snow Load:</label><br>
        <input type="number" id="snowLoad" step="0.1"><br>
        <img id="imgSnow" src="./img/load-snow.png" style="height:30px;display:none;"><br>

        <label>Wind Load:</label><br>
        <input type="number" id="windLoad" step="0.1"><br>
        <img id="imgWindPositive" src="./img/load-wind.png" style="height:30px;display:none;">
        <img id="imgWindNegative" src="./img/load-wind-negative.png" style="height:30px;display:none;"><br>

        <label>Mobile (Live) Load:</label><br>
        <input type="number" id="mobileLoad" step="0.1"><br>
        <img id="imgMobile" src="./img/load-mobile.png" style="height:30px;display:none;"><br>

        <canvas id="loadCanvas" width="400" height="400" style="margin-top:10px;"></canvas>
        
        <div id="combinedLoadImage" style="display:none;text-align:center;margin:20px 0;"></div>
        <button id="toggleCombinedBtn" style="display:none;margin-top:10px;">Show Combined Loads</button>

        <br>
        <button id="backToSlabBtn">‚Üê Back to Slab</button>
        <button type="button" id="continueToTributaryBtn">Continue ‚Üí</button>
      </div>
    </div>
</div>

<div id="tributaryScreen" class="screen">
    <h2>Design Calculation Phase</h2>

    <div style="display:flex; gap:40px; align-items:flex-start; flex-wrap:wrap; justify-content:center;">
      
      <div>
        <canvas id="loadCanvasPreview" width="300" height="300"></canvas>
      </div>

      <div style="text-align:left; max-width:400px;">
        <h3>Step 1: Tributary Width</h3>
        <label>Choose Beam:</label><br>
        <select id="beamSelect"></select><br>
        <label>Enter Tributary Width (ft):</label><br>
        <input type="number" id="tributaryWidth" step="0.1"><br>
        <button id="submitLoadBtn">Check Tributary Width</button>
        
        <div id="feedback" style="display:none;margin-top:10px;"></div>
        <img id="feedbackGif" style="display:none;max-width:150px;margin-top:10px;">
      </div>
    </div>

    <div id="finalCalcSection" style="display:none; margin-top:30px; border-top:2px solid #aaa; padding-top:20px; width:100%;">
        <h3>Step 2: Final Design Values</h3>
        <p>Calculate your design values based on <strong>ULS (1.35 G + 1.5 Q)</strong>.</p>
        
        <div style="display:flex; justify-content:center; flex-wrap:wrap;">
            <div class="input-group">
                <label><strong>E<sub>d</sub></strong> (Design Load)<br><small>kN/m (or lbs/ft)</small></label><br>
                <input type="number" id="designLoadInput" step="0.01">
            </div>

            <div class="input-group">
                <label><strong>V<sub>max</sub></strong> (Shear)<br><small>kN (or lbs)</small></label><br>
                <input type="number" id="vMaxInput" step="0.01">
            </div>

            <div class="input-group">
                <label><strong>M<sub>max</sub></strong> (Moment)<br><small>kN¬∑m (or lbs¬∑ft)</small></label><br>
                <input type="number" id="mMaxInput" step="0.01">
            </div>

            <div class="input-group">
                <label><strong>Œ¥<sub>max</sub></strong> (Deflection)<br><small>mm (or in)</small></label><br>
                <input type="number" id="deltaMaxInput" step="0.01">
            </div>
        </div>

        <button id="checkFinalValuesBtn" style="font-size:1.2em; padding:15px 30px; margin-top:20px;">Check All & Finish</button>
        
        <div id="finalFeedback" style="margin-top:20px; font-weight:bold; font-size:1.1em;"></div>
        <button id="continueToSummaryBtn" style="display:none; margin-top:20px; background-color:#2ecc71;">View Summary ‚Üí</button>
    </div>
</div>

<div id="resultScreen" class="screen">
    <h2>üèÅ Final Score</h2>
    <div id="finalScore"></div>
    <button onclick="location.reload()">Start Over</button>
</div>

<div id="badgeNotification" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); padding:20px 40px; background-color:rgba(0, 119, 204, 0.9); color:white; border-radius:10px; z-index:2000; font-size:1.5em; font-weight:bold;"></div>

<audio id="clickSound" src="./sounds/click.mp3" preload="auto"></audio>
<audio id="successSound" src="./sounds/success.wav" preload="auto"></audio>
<audio id="errorSound" src="./sounds/error.wav" preload="auto"></audio>
<audio id="badgeSound" src="./sounds/badge.mp3" preload="auto"></audio>

<script src="deneme4.js"></script>
</body>
</html>
